<!-- 第三章：化学反应原理 -->
<section id="reactions" class="section">
    <div class="section-header">
        <h1>化学反应原理</h1>
        <p class="subtitle">探索化学反应的本质、能量变化与平衡规律</p>
    </div>

    <div class="container">
        <!-- 导航标签 -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="reaction-types">反应类型</button>
            <button class="tab-btn" data-tab="energy-changes">能量变化</button>
            <button class="tab-btn" data-tab="reaction-rate">反应速率</button>
            <button class="tab-btn" data-tab="chemical-equilibrium">化学平衡</button>
        </div>

        <!-- 反应类型标签页 -->
        <div id="reaction-types" class="tab-content active">
            <div class="card">
                <h2>四大基本反应类型</h2>
                <p class="description">化学反应可以根据反应物和生成物的关系分为四种基本类型。</p>
                
                <div class="reaction-grid">
                    <div class="reaction-card" data-type="combination">
                        <h3>化合反应</h3>
                        <p class="formula">A + B → AB</p>
                        <div class="canvas-container">
                            <canvas id="combination-canvas" width="300" height="200"></canvas>
                        </div>
                        <p class="example">示例: 2H₂ + O₂ → 2H₂O</p>
                        <button class="btn small play-animation" data-canvas="combination-canvas">播放动画</button>
                    </div>
                    
                    <div class="reaction-card" data-type="decomposition">
                        <h3>分解反应</h3>
                        <p class="formula">AB → A + B</p>
                        <div class="canvas-container">
                            <canvas id="decomposition-canvas" width="300" height="200"></canvas>
                        </div>
                        <p class="example">示例: 2H₂O → 2H₂ + O₂</p>
                        <button class="btn small play-animation" data-canvas="decomposition-canvas">播放动画</button>
                    </div>
                    
                    <div class="reaction-card" data-type="replacement">
                        <h3>置换反应</h3>
                        <p class="formula">A + BC → AC + B</p>
                        <div class="canvas-container">
                            <canvas id="replacement-canvas" width="300" height="200"></canvas>
                        </div>
                        <p class="example">示例: Zn + 2HCl → ZnCl₂ + H₂</p>
                        <button class="btn small play-animation" data-canvas="replacement-canvas">播放动画</button>
                    </div>
                    
                    <div class="reaction-card" data-type="double-displacement">
                        <h3>复分解反应</h3>
                        <p class="formula">AB + CD → AD + CB</p>
                        <div class="canvas-container">
                            <canvas id="double-displacement-canvas" width="300" height="200"></canvas>
                        </div>
                        <p class="example">示例: AgNO₃ + NaCl → AgCl↓ + NaNO₃</p>
                        <button class="btn small play-animation" data-canvas="double-displacement-canvas">播放动画</button>
                    </div>
                </div>
                
                <div class="info-box">
                    <h4>反应类型识别练习</h4>
                    <div class="practice-area">
                        <p id="reaction-question">判断反应类型: Fe + CuSO₄ → FeSO₄ + Cu</p>
                        <div class="options">
                            <button class="option-btn" data-answer="combination">化合</button>
                            <button class="option-btn" data-answer="decomposition">分解</button>
                            <button class="option-btn" data-answer="replacement">置换</button>
                            <button class="option-btn" data-answer="double-displacement">复分解</button>
                        </div>
                        <p id="feedback" class="feedback"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 能量变化标签页 -->
        <div id="energy-changes" class="tab-content">
            <div class="card">
                <h2>化学反应的能量变化</h2>
                <p class="description">所有化学反应都伴随着能量的吸收或释放。</p>
                
                <div class="energy-container">
                    <div class="energy-visualization">
                        <h3>能量变化图</h3>
                        <div class="canvas-container">
                            <canvas id="energy-canvas" width="400" height="300"></canvas>
                        </div>
                        <div class="controls">
                            <button class="btn small" id="show-exothermic">放热反应</button>
                            <button class="btn small" id="show-endothermic">吸热反应</button>
                            <div class="slider-container">
                                <label>反应进度: <span id="progress-value">50%</span></label>
                                <input type="range" id="reaction-progress" min="0" max="100" value="50">
                            </div>
                        </div>
                    </div>
                    
                    <div class="energy-info">
                        <h3>能量概念</h3>
                        <ul>
                            <li><strong>焓变(ΔH)</strong>: 反应前后系统的热含量变化</li>
                            <li><strong>活化能(Ea)</strong>: 反应发生所需的最小能量</li>
                            <li><strong>催化剂</strong>: 降低活化能，加速反应</li>
                            <li><strong>热化学方程式</strong>: 包含能量变化的化学方程式</li>
                        </ul>
                        
                        <div class="calculation-box">
                            <h4>能量计算</h4>
                            <div class="input-group">
                                <input type="number" id="bond-energy-1" placeholder="断裂键能(kJ/mol)">
                                <input type="number" id="bond-energy-2" placeholder="形成键能(kJ/mol)">
                                <button class="btn small" id="calculate-energy">计算ΔH</button>
                            </div>
                            <p id="energy-result" class="result"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 反应速率标签页 -->
        <div id="reaction-rate" class="tab-content">
            <div class="card">
                <h2>化学反应速率</h2>
                <p class="description">反应速率受浓度、温度、催化剂等因素影响。</p>
                
                <div class="rate-experiment">
                    <h3>反应速率影响因素实验</h3>
                    <div class="experiment-controls">
                        <div class="control-group">
                            <label>浓度: <span id="concentration-value">1.0 mol/L</span></label>
                            <input type="range" id="concentration-slider" min="0.1" max="2.0" step="0.1" value="1.0">
                        </div>
                        <div class="control-group">
                            <label>温度: <span id="temperature-value">25°C</span></label>
                            <input type="range" id="temperature-slider" min="0" max="100" value="25">
                        </div>
                        <div class="control-group">
                            <label>催化剂: </label>
                            <select id="catalyst-select">
                                <option value="none">无催化剂</option>
                                <option value="enzyme">酶催化剂</option>
                                <option value="metal">金属催化剂</option>
                            </select>
                        </div>
                        <button class="btn" id="start-experiment">开始实验</button>
                    </div>
                    
                    <div class="experiment-visualization">
                        <canvas id="rate-canvas" width="600" height="300"></canvas>
                        <div class="legend">
                            <span class="legend-item reactant">反应物浓度</span>
                            <span class="legend-item product">生成物浓度</span>
                            <span class="legend-item rate">反应速率</span>
                        </div>
                    </div>
                    
                    <div class="collision-theory">
                        <h4>碰撞理论</h4>
                        <p>只有具有足够能量且方向正确的碰撞才能导致反应发生。</p>
                        <div class="canvas-container">
                            <canvas id="collision-canvas" width="300" height="200"></canvas>
                        </div>
                        <button class="btn small" id="simulate-collisions">模拟碰撞</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 化学平衡标签页 -->
        <div id="chemical-equilibrium" class="tab-content">
            <div class="card">
                <h2>化学平衡</h2>
                <p class="description">可逆反应达到动态平衡时，正逆反应速率相等。</p>
                
                <div class="equilibrium-demo">
                    <h3>动态平衡演示</h3>
                    <div class="canvas-container">
                        <canvas id="equilibrium-canvas" width="500" height="300"></canvas>
                    </div>
                    <div class="equilibrium-controls">
                        <button class="btn small" id="add-reactant">增加反应物</button>
                        <button class="btn small" id="add-product">增加生成物</button>
                        <button class="btn small" id="change-pressure">改变压强</button>
                        <button class="btn small" id="change-temperature">改变温度</button>
                        <button class="btn small" id="reset-equilibrium">重置</button>
                    </div>
                    
                    <div class="le-chatelier">
                        <h4>勒夏特列原理</h4>
                        <p>如果改变影响平衡的条件，平衡会向着减弱这种改变的方向移动。</p>
                        <div class="principle-examples">
                            <div class="example">
                                <p><strong>浓度变化</strong>: 增加反应物 → 平衡向生成物方向移动</p>
                            </div>
                            <div class="example">
                                <p><strong>温度变化</strong>: 升高温度 → 平衡向吸热方向移动</p>
                            </div>
                            <div class="example">
                                <p><strong>压强变化</strong>: 增加压强 → 平衡向气体分子数减少的方向移动</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="equilibrium-constant">
                        <h4>平衡常数计算器</h4>
                        <div class="calculator">
                            <div class="input-row">
                                <label>反应: A + B ⇌ C + D</label>
                            </div>
                            <div class="input-row">
                                <input type="number" id="concentration-a" placeholder="[A]" value="1.0">
                                <input type="number" id="concentration-b" placeholder="[B]" value="1.0">
                                <span>⇌</span>
                                <input type="number" id="concentration-c" placeholder="[C]" value="1.0">
                                <input type="number" id="concentration-d" placeholder="[D]" value="1.0">
                            </div>
                            <button class="btn" id="calculate-k">计算平衡常数K</button>
                            <p id="k-result" class="result"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
